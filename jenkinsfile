pipeline {
    agent any

environment { 
        PATH+EXTRA = '$PATH:getterraform()'
    }
  stages {
	stage ('checkout')
 	{
		steps {
                checkout([$class: 'GitSCM', branches: [[name: '*/master']], extensions: [], userRemoteConfigs: [[url: 'https://github.com/yarli9951/GITDEMO.git']]])
            }
	}
	stage ('build')
	{
		steps {
		script {
		
		sh '''
		      cd /var/lib/jenkins/workspace/Maven-pipleine/my-app/
              mvn package 
			'''
		}
		}
	}
	stage ('Non-regression')
	{
		steps {
		echo 'This is build stage'
		}
	}
         stage ('deploy')
	{
		steps {
		echo 'This is build stage'
		}
	}
stage ('Terraform')
{
	steps
	{
	script 
	{
		sh 'terraform init'
	}
	
}
}

    }
}


def getterraform(){

   def getpath=tool name: 'terraform', type: 'terraform'

}
